<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8"> <!-- 文字エンコーディングをUTF-8に設定 -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- ビューポート設定 -->
	<title>管理者用予約詳細確認画面</title> <!-- ページタイトル -->
	<style>
		:root {
			--primary-color: #4CAF50; /* プライマリーカラー */
			--secondary-color: #45a049; /* セカンダリーカラー */
			--background-color: #f8f8f8; /* 背景色 */
			--text-color: #333; /* テキスト色 */
			--card-background: #fff; /* カードの背景色 */
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* フォント設定 */
			margin: 0; /* マージンを0に設定 */
			padding: 20px; /* パディング */
			background-color: var(--background-color); /* 背景色 */
			color: var(--text-color); /* テキスト色 */
		}

		.container {
			max-width: 1200px; /* コンテナの最大幅 */
			margin: 0 auto; /* 中央寄せ */
			background-color: var(--card-background); /* カードの背景色 */
			border-radius: 12px; /* 角を丸くする */
			box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); /* シャドウ効果 */
			padding: 25px; /* 内側のパディング */
		}

		h1 {
			text-align: center; /* 中央揃え */
			color: var(--text-color); /* テキスト色 */
			font-size: 1.8em; /* フォントサイズ */
			margin-bottom: 30px; /* 下にマージンを追加 */
		}

		h2 {
			text-align: left; /* 左揃え */
			color: var(--text-color); /* テキスト色 */
			font-size: 1.2em; /* フォントサイズ */
			margin-bottom: 20px; /* 下にマージンを追加 */
		}

		.date-label {
			font-size: 1em; /* フォントサイズ */
			color: var(--text-color); /* テキスト色 */
		}

		table {
			width: 100%; /* 幅を100%に設定 */
			border-collapse: collapse; /* ボーダーを結合 */
			margin: 20px 0; /* 上下に20pxの隙間を追加 */
			margin-bottom: 40px; /* 下部の隙間をさらに増やす */
		}

		th,
		td {
			padding: 12px; /* 内側のパディング */
			text-align: left; /* 左揃え */
			border-bottom: 1px solid #ddd; /* 下ボーダー */
		}

		th {
			background-color: var(--primary-color); /* ヘッダーの背景色 */
			color: white; /* ヘッダーの文字色 */
		}

		tr:hover {
			background-color: #f5f5f5; /* ホバー時の背景色 */
		}

		.btn {
			display: inline-block; /* インラインブロック */
			padding: 12px 20px; /* ボタンの内側の余白 */
			background-color: var(--primary-color); /* ボタンの背景色 */
			color: white; /* テキスト色を白に設定 */
			text-decoration: none; /* 下線なし */
			border-radius: 25px; /* ボタンの角を丸くする */
			transition: background-color 0.3s, transform 0.2s; /* ホバー時の効果 */
			font-weight: bold; /* 太字 */
			border: none; /* ボーダーなし */
			cursor: pointer; /* カーソルをポインタに */
		}

		.btn:hover {
			background-color: var(--secondary-color); /* ホバー時の色 */
			transform: scale(1.05); /* ホバー時に拡大 */
		}

		.error {
			color: red; /* エラーメッセージの色 */
			margin-bottom: 15px; /* 下にマージン */
		}

		.no-reservation {
			text-align: center; /* 中央揃え */
			font-size: 1.2em; /* フォントサイズ */
			color: #666; /* テキスト色 */
			margin: 20px 0; /* 上下にマージン */
		}

		.delete-btn {
			display: inline-block; /* インラインブロック */
			padding: 8px 12px; /* ボタンの内側の余白 */
			background-color: red; /* 削除ボタンの背景色 */
			color: white; /* テキスト色を白に設定 */
			text-decoration: none; /* 下線なし */
			border-radius: 12px; /* ボタンの角を丸くする */
			transition: background-color 0.3s, transform 0.2s; /* ホバー時の効果 */
			font-weight: bold; /* 太字 */
			border: none; /* ボーダーなし */
			cursor: pointer; /* カーソルをポインタに */
		}

		.delete-btn:hover {
			background-color: darkred; /* ホバー時の色 */
			transform: scale(1.05); /* ホバー時に拡大 */
		}

		.alert {
			padding: 10px; /* 内側のパディング */
			margin-bottom: 20px; /* 下にマージン */
			border: 1px solid transparent; /* ボーダー */
			border-radius: 4px; /* 角を丸くする */
		}

		.alert-danger {
			color: crimson; /* エラーメッセージの色 */
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>予約詳細確認画面</h1> <!-- ページ見出し -->

		<!-- フラッシュメッセージの表示 -->
		<div th:if="${message}" class="alert alert-danger">
			<span th:text="${message}"></span> <!-- メッセージ表示 -->
		</div>

		<h2>選択された日付:
			<span id="selectedDate" class="date-label" th:text="${selectedDate}"></span> <!-- 選択された日付の表示 -->
		</h2>

		<div id="errorMessage" class="error"></div> <!-- エラーメッセージ用のDIV -->
		<div id="calendar">
			<form th:action="@{/adminlist}" method="get" onsubmit="return validateDate()">
				<input type="date" id="date-picker" name="date" required> <!-- 日付入力フィールド -->
				<button type="submit" class="btn">検索</button> <!-- 検索ボタン -->
			</form>

			<div th:if="${list == null or list.isEmpty()}" class="no-reservation"> <!-- 予約がない場合 -->
				指定された日の予約はありません。 <!-- メッセージ表示 -->
			</div>

			<table th:if="${list != null and !list.isEmpty()}"> <!-- 予約がある場合のテーブル -->
				<thead>
					<tr>
						<th>時間</th>
						<th>ユーザーネーム</th>
						<th>電話番号</th>
						<th>人数</th>
						<th>特記事項</th>
						<th>削除</th>
					</tr>
				</thead>
				<tbody id="tableBody">
					<tr th:each="hour : ${list}"> <!-- 予約情報をループ表示 -->
						<td th:text="${hour.booktime}">18:00</td> <!-- 予約時間 -->
						<td th:text="${hour.userid.displayName}">名前</td> <!-- ユーザーネーム -->
						<td th:text="${hour.userid.tellNumber}">電話番号</td> <!-- 電話番号 -->
						<td th:text="${hour.bookcount}">人数</td> <!-- 人数 -->
						<td th:text="${hour.memo}">特記事項</td> <!-- 特記事項 -->
						<td>
							<form th:action="@{/delete-admin/{id}(id=${hour.id})}" method="post"> <!-- 削除用フォーム -->
								<input type="hidden" name="date" th:value="${selectedDate}"> <!-- 日付を追加 -->
								<input type="hidden" name="username" th:value="${hour.userid.username}"> <!-- ユーザーネームを追加 -->
								<button type="submit" class="delete-btn" onclick="return confirm('この予約を削除してもよろしいですか？');">削除</button> <!-- 削除ボタン -->
							</form>
						</td>
					</tr>
				</tbody>
			</table>

			<form th:action="@{adminmenu}" method="get"> <!-- 戻るボタン用フォーム -->
				<button type="submit" class="btn">戻る</button> <!-- 戻るボタン -->
			</form>
		</div>

		<script>
			document.addEventListener('DOMContentLoaded', function () {
				const dateElement = document.getElementById('selectedDate'); // 選択された日付の要素
				const dateText = dateElement.textContent; // 例: 2024-10-24
				const date = new Date(dateText); // Dateオブジェクトに変換

				// 月と日を取得してフォーマット
				const options = {month: 'numeric', day: 'numeric'};
				const formattedDate = date.toLocaleDateString('ja-JP', options).replace(/(\d+)\/(\d+)/, '$1月$2日');

				dateElement.textContent = formattedDate; // フォーマットした日付を設定
			});
		</script>
	</div>
</body>

</html>
