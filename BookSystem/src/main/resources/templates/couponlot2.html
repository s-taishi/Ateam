<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

	<meta charset="UTF-8">
	<title>クーポンルーレット</title>
	<style>
		body {
					margin: 0;
					padding: 0;
					font-family: 'Arial', sans-serif;
					background-image: url('/img/JUGGLER.jpg');
					background-size: cover;
					background-position: center;
					display: flex;
					flex-direction: column;
					align-items: center;
					/* 水平中央揃え */
					justify-content: center;
					/* 垂直中央揃え */
					height: 100vh;
					color: rgba(255, 255, 255, 0.8);
					text-align: center;
					/* テキストを中央に揃え */
				}
		
				#coupon-result {
					margin-bottom: 20px;
					/* 下に余白 */
					font-size: 3em;
					font-weight: bold;
					color: #FFF566;
					/* 文字色 */
					text-shadow:
						0 0 10px rgba(0, 0, 0, 0.8),
						/* 黒の影 */
						0 0 20px rgba(255, 255, 0, 0.8),
						/* 明るい影 */
						0 0 30px rgba(255, 0, 255, 0.8);
					/* ネオンピンクの影 */
					opacity: 0;
					/* 初期は透明 */
					transition: opacity 0.5s ease;
					/* フェードイン用 */
				}
		
				#roulette-container {
					width: 300px;
					height: 300px;
					position: relative;
					margin: 20px 0;
					/* 上下のマージン */
				}
		
				#roulette {
					width: 100%;
					height: 100%;
					border-radius: 50%;
					transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);
					background: conic-gradient(from 0deg,
							#ff00ff 0deg 72deg,
							#00ff00 72deg 144deg,
							#ff6600 144deg 216deg,
							#ffff00 216deg 288deg,
							#00ffff 288deg 360deg);
					box-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
						0 0 30px rgba(255, 255, 255, 0.6),
						0 0 40px rgba(255, 255, 255, 0.4);
					animation: glow 2s infinite alternate;
				}
		
				@keyframes glow {
					from {
						box-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
							0 0 30px rgba(255, 255, 255, 0.6),
							0 0 40px rgba(255, 255, 255, 0.4);
					}
		
					to {
						box-shadow: 0 0 40px rgba(255, 255, 255, 0.8),
							0 0 50px rgba(255, 255, 255, 0.6),
							0 0 60px rgba(255, 255, 255, 0.4);
					}
				}
		
				.coupon-item {
					position: absolute;
					top: 0;
					right: 50%;
					transform-origin: 100% 100%;
					width: 50%;
					height: 50%;
					display: flex;
					align-items: center;
					justify-content: center;
					box-sizing: border-box;
					color: white;
					font-weight: bold;
					text-shadow: 0 0 5px rgba(0, 0, 0, 0.8),
						0 0 10px rgba(255, 255, 255, 0.8);
					font-size: 14px;
					text-align: center;
					padding: 0 5px;
				}
		
				.arrow {
					position: absolute;
					top: -30px;
					left: 50%;
					transform: translateX(-50%);
					width: 0;
					height: 0;
					border-left: 20px solid transparent;
					border-right: 20px solid transparent;
					border-top: 30px solid #333;
				}
		
				button {
					margin-top: 20px;
					padding: 10px 20px;
					font-size: 1.2em;
					cursor: pointer;
					background-color: #ff00ff;
					border: none;
					border-radius: 5px;
					color: white;
					text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
					box-shadow: 0 0 10px rgba(255, 0, 255, 0.8);
					transition: all 0.3s ease;
				}
		
				button:hover {
					background-color: #ff66ff;
					box-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
				}
		
				@keyframes rainbow {
					0% {
						color: #ff0000;
					}
		
					14% {
						color: #ff7f00;
					}
		
					28% {
						color: #ffff00;
					}
		
					42% {
						color: #00ff00;
					}
		
					57% {
						color: #0000ff;
					}
		
					71% {
						color: #8b00ff;
					}
		
					85% {
						color: #ff00ff;
					}
		
					100% {
						color: #ff0000;
					}
				}
		
				.rainbow-text {
					animation: rainbow 6s linear infinite;
				}
		
				#coupon-result {
					margin-bottom: 20px;
					font-weight: bold;
					text-shadow:
						0 0 10px rgb(255, 128, 192),
						0 0 50px rgb(128, 0, 255),
						0 0 30px rgb(255, 255, 128)(255, 255, 255, 0.8);
					opacity: 0;
				}
		
				.wave-text {
					display: inline-block;
					font-size: 3em;
					color: greenyellow;
					/* 文字色 */
					animation: wave 1s infinite;
				}
		
				@keyframes wave {
		
					0%,
					100% {
						transform: translateY(0);
					}
		
					50% {
						transform: translateY(-10px);
					}
				}

        #roulette-container {
            width: 300px;
            height: 300px;
            position: relative;
            margin: 20px auto;
        }
       
        .coupon-item {
            position: absolute;
            top: 0;
            right: 50%;
            transform-origin: 100% 100%;
            width: 50%;
            height: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            font-size: 14px;
            text-align: center;
            padding: 0 10px;
        }
        .arrow {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 30px solid #333;
        }
        #coupon-result {
            margin-top: 20px;
            font-size: 2em;
            font-weight: bold;
            color: green;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
        }
		
    </style>
	<script>
	        window.onload = function() {
	            const couponId = /*[[${num}]]*/ 1; // ここにサーバーから送られてくるクーポンIDを設定
	            const angleMap = {
					1: 36,
	                2: 108,
	                3: 180,
          		    4: 252,
               		5: 324    
					};
	     
	        
	            const rotationAngle = angleMap[couponId] + 360 * 10; // 10回転後に止まる
	            const roulette = document.getElementById('roulette');
	            roulette.style.transform = 'rotate(' + rotationAngle + 'deg)';
	            document.getElementById('coupon-result').style.opacity = 1; // 結果表示のためのフェードイン
	        };
	    </script>
</head>

<body>
	
	<div id="coupon-result">
		<span class="wave-text"></span>
	</div>
<!--	data-coupon-idこのidによって上部のanglemapと紐づけている-->
    <div id="roulette-container">
        <div id="roulette">
            <div class="coupon-item" data-coupon-id="1" style="transform: rotate(0deg)">半額</div>
            <div class="coupon-item" data-coupon-id="2" style="transform: rotate(72deg)">1000円引き</div>
            <div class="coupon-item" data-coupon-id="3" style="transform: rotate(144deg)">ドリンク１杯無料</div>
            <div class="coupon-item" data-coupon-id="4" style="transform: rotate(216deg)">席料 無料</div>
            <div class="coupon-item" data-coupon-id="5" style="transform: rotate(288deg)">はずれ</div>
        </div>
        <div class="arrow"></div>

    </div>

    <div id="coupon-result"></div>
<!--    <button id="spin-button" onclick="startRoulette()">結果を表示</button>-->
	<form th:action="@{/detail/{id}(id=${num})}" method="get">
	<button type="submit" class="btn btn-secondary">結果を表示</button>
	</form>


    <audio id="roulette-sound">
        <source src="/audio/SE114.mp3" type="audio/mpeg">
        お使いのブラウザは音声タグに対応していません。
    </audio>

 
</body>

</html>
